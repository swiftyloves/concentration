<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' media="all" rel="stylesheet" type="text/css" />
    <style type="text/css">
    svg {
      border: solid 1px #aaa;
    }

    #checks {
      margin: 10px;
    }
    #solvent:hover {
       stroke: #CCC;
       stroke-width: 3;
       fill: red;
       cursor: pointer;
       box-shadow: 10px -10px #CCC;
     }
     #container {
        margin-bottom: -50px;
     }
     #reset {
        position: absolute;
        right: 50px;
     }
     .concentration {
        font-size: 2em;
     }
     .center {
        text-align: center;
     }
     .mb-5 {
        margin-bottom: 50px;
     }
     .mb-3 {
        margin-bottom: 30px;
     }
     .overall {
        display: -webkit-flex; /* Safari */
        -webkit-align-items: center; /* Safari 7.0+ */
        display: flex;
        align-items: center;
     }
     .flex-in {
        flex: 1;
     }
     .flex-in-2 {
        flex: 2;
     }
     .border-top {
        border-top: 1px solid gray;
     }
     #reset {
        font-size: 20px;
        border-radius: 3px;
     }
     .content {
        font-size: 18px;
        line-height: 30px;
        color: #8a8a8a;
        font-family: 'Open Sans';
     }
     .annotation {
        font-size: 15px;
        line-height: 20px;
        color: #8a8a8a;
        font-family: 'serif';
     }
     .orange {
        color: orange;
     }
    </style>
  </head>
  <body>
    <div class="container-fluid min-h100per">
        <div class="row mb-5">
            <div class="col-md-offset-1 col-md-10">
                <h2 class="center">Concentration</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-1 col-md-10">
                <h3 class="">Introduction</h3>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-offset-1 col-md-10 content">
                In chemistry, concentration is the abundance of a constituent divided by the total volume of a mixture. Several types of mathematical description can be distinguished: <strong>mass concentration</strong>, molar concentration, number concentration, and volume concentration.[1] The term concentration can be applied to any kind of chemical mixture, but most frequently it refers to solutes and solvents in solutions. The molar (amount) concentration has variants such as normal concentration and osmotic concentration.
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-1 col-md-10">
                <h3 class="">Formula</h3>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-offset-2 col-md-8 content">
                <div class="row overall">
                    <div class="col-md-offset-0 col-md-2 flex-in">
                        <span>Mass Concentration</span>
                    </div>
                    <div class="col-md-1">
                        =
                    </div>
                    <div class="col-md-5 flex-in-2 center">
                        <div><span>Mass of Solvent</span></div>
                        <div class="border-top"><span>Mass of Solvent + Mass of Solute</span></div>
                    </div>
                    <div class="col-md-1">
                        =
                    </div>
                    <div class="col-md-2 flex-in center">
                        <div><span>Mass of Solvent</span></div>
                        <div class="border-top"><span>Mass of Solution</span></div>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="row mb-5">
            <div class="col-md-offset-1 col-md-10 annotation">
                The numerator is the mass of solvent and the denominator is the mass of the solution.
            </div>
        </div>

        <!-- <div class="row">
            <div class="col-md-offset-1 col-md-10">
                <h3 class="">Try</h3>
            </div>
        </div>
        <div class="row mb-5">
            <div class="col-md-offset-1 col-md-10 content">
                Change the solution and solvent to see how concentration changes.
            </div>
        </div> -->

        <div class="row">
            <div class="col-md-offset-1 col-md-10">
                <h3 class="">Experienment</h3>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-offset-1 col-md-10 content">
                <p>Changing the horizontal line of the solution causes the change of mass of solution, which also changes the denominator of concentration. Cliking the dropper would produce solvent and flow into the solution, which increases the mass of solvent.</p>
                <p>
                    The solvent is red. the color of the solution is darker (and more red) when we add more sovent, which means the concentration is higher.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-1 col-md-10">
                <div class="row overall">
                    <div class="col-md-2 flex-in-1 content">
                        <span>Concentration</span>
                    </div>
                    <div class="col-md-1 flex-in-1">
                        =
                    </div>
                    <div class="col-md-2 flex-in-1 center content">
                        <div><span>Mass of Solvent</span></div>
                        <div class="border-top"><span>Mass of Solution</span></div>
                    </div>
                    <div class="col-md-1 flex-in-1">
                        =
                    </div>
                    <div class="col-md-2 flex-in-2 center concentration">
                        <div><span id="solvent-num" class="abc">100</span> g </div>
                        <div class="border-top"><span id="solution-num"></span> g</div>
                    </div>
                    <div class="col-md-1 flex-in-1 concentration">
                        =
                    </div>
                    <div class="col-md-1 flex-in concentration">
                        <span id="result"></span> %
                    </div>
                </div>
                <div class=" center mb-5">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-1 col-md-10 annotation">
                Click on the red dropper and move the orange bar.
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-1 col-md-10">
                <div id="container"></div>
                <button id="reset" class="btn-primary btn-default">Reset</button>
            </div>
        </div>
    </div>
    

    
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="dragrect.js"></script>
    <script type="text/javascript" src="particles.js"></script>
    <script>
        
        dragbartop 
        .attr("cursor", "ns-resize");

        var updateResult = function() {
            document.getElementById("solvent-num").className = "";
            document.getElementById("solution-num").className = "";
            document.getElementById("result").className = "";

            let original_solvent = document.getElementById("solvent-num").textContent;
            
            if (parseInt(original_solvent) !== solvent) {
                document.getElementById("solvent-num").className = "orange";
            }
            document.getElementById("solvent-num").textContent = solvent;

            let original_solution = document.getElementById("solution-num").textContent;
            document.getElementById("solution-num").textContent = width * height / 100;
            if (parseFloat(original_solution) !== width * height / 100) {
                document.getElementById("solution-num").className = "orange";
            }
            
            dragrect.attr("fill", solutionColor(solvent, height * width));
            
            let soluton = width * height / 100;
            document.getElementById("result").textContent =  Math.round(solvent / soluton * 10000) / 100;
            document.getElementById("result").className = "orange";
        };
        updateResult();
        document.getElementById("reset").addEventListener("click", function(){
            solvent = 100;
            updateResult();
            particles = [];
            resetIni();
            for (var i = 0; i < numParticles; i++) {
              createParticle("init");
            }
            var dtg = new Date();
              epochActual = dtg.getTime();
              doEpoch();
            addSolventListener();
        });
    </script>
  </body>
</html>